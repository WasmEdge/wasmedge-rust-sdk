<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Creation of the WasmEdge_FunctionInstanceContext for host functions."><title>WasmEdge_FunctionInstanceCreate in wasmedge_sys::ffi - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="wasmedge_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0-nightly (4ba4ac612 2024-12-18)" data-channel="nightly" data-search-js="search-036cda7a.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/cncf/artwork/49169bdbc88a7ce3c4a722c641cc2d548bd5c340/projects/wasm-edge-runtime/icon/color/wasm-edge-runtime-icon-color.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../wasmedge_sys/index.html"><img src="https://github.com/cncf/artwork/blob/master/projects/wasm-edge-runtime/icon/color/wasm-edge-runtime-icon-color.png?raw=true" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../wasmedge_sys/index.html"><img src="https://github.com/cncf/artwork/blob/master/projects/wasm-edge-runtime/icon/color/wasm-edge-runtime-icon-color.png?raw=true" alt="logo"></a><h2><a href="../../wasmedge_sys/index.html">wasmedge_<wbr>sys</a><span class="version">0.19.4</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"><h2><a href="index.html">In wasmedge_<wbr>sys::<wbr>ffi</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">wasmedge_sys</a>::<wbr><a href="index.html">ffi</a></span><h1>Function <span class="fn">WasmEdge_FunctionInstanceCreate</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/wasmedge_sys/__w/wasmedge-rust-sdk/wasmedge-rust-sdk/target/debug/build/wasmedge-sys-8425d5502c04cfd8/out/wasmedge.rs.html#3">Source</a> </span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn WasmEdge_FunctionInstanceCreate(
    Type: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.pointer.html">*const </a><a class="struct" href="struct.WasmEdge_FunctionTypeContext.html" title="struct wasmedge_sys::ffi::WasmEdge_FunctionTypeContext">WasmEdge_FunctionTypeContext</a>,
    HostFunc: <a class="type" href="type.WasmEdge_HostFunc_t.html" title="type wasmedge_sys::ffi::WasmEdge_HostFunc_t">WasmEdge_HostFunc_t</a>,
    Data: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.pointer.html">*mut </a><a class="type" href="https://doc.rust-lang.org/nightly/std/os/raw/type.c_void.html" title="type std::os::raw::c_void">c_void</a>,
    Cost: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>,
) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.pointer.html">*mut </a><a class="struct" href="struct.WasmEdge_FunctionInstanceContext.html" title="struct wasmedge_sys::ffi::WasmEdge_FunctionInstanceContext">WasmEdge_FunctionInstanceContext</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Creation of the WasmEdge_FunctionInstanceContext for host functions.</p>
<p>The caller owns the object and should call <code>WasmEdge_FunctionInstanceDelete</code>
to destroy it if the returned object is not added into a
<code>WasmEdge_ModuleInstanceContext</code>. The following is an example to create a
host function context.</p>
<div class="example-wrap"><pre class="language-c"><code>WasmEdge_Result FuncAdd(void *Data,
                        const WasmEdge_CallingFrameContext *CallFrameCxt,
                        const WasmEdge_Value *In, WasmEdge_Value *Out) {
  // Function to return A + B.
  int32_t A = WasmEdge_ValueGetI32(In[0]);
  int32_t B = WasmEdge_ValueGetI32(In[1]);
  Out[0] = WasmEdge_ValueGenI32(A + B);
  // Return execution status
  return WasmEdge_Result_Success;
}

WasmEdge_ValType Params[2] = {WasmEdge_ValTypeGenI32(),
                              WasmEdge_ValTypeGenI32()};
WasmEdge_ValType Returns[1] = {WasmEdge_ValTypeGenI32()};
WasmEdge_FunctionTypeContext *FuncType =
    WasmEdge_FunctionTypeCreate(Params, 2, Returns, 1);
WasmEdge_FunctionInstanceContext *HostFunc =
    WasmEdge_FunctionInstanceCreate(FuncType, FuncAdd, NULL, 0);
WasmEdge_FunctionTypeDelete(FuncType);
...</code></pre></div>
<p>\param Type the function type context to describe the host function
signature.
\param HostFunc the host function pointer. The host function signature must
be as following:</p>
<div class="example-wrap"><pre class="language-c"><code>typedef WasmEdge_Result (*WasmEdge_HostFunc_t)(
    void *Data,
    const WasmEdge_CallingFrameContext *CallFrameCxt,
    const WasmEdge_Value *Params,
    WasmEdge_Value *Returns);</code></pre></div>
<p>The <code>Params</code> is the input parameters array with length guaranteed to be the
same as the parameter types in the <code>Type</code>. The <code>Returns</code> is the output
results array with length guaranteed to be the same as the result types in
the <code>Type</code>. The return value is <code>WasmEdge_Result</code> for the execution status.
\param Data the additional object, such as the pointer to a data structure,
to set to this host function context. The caller should guarantee the life
cycle of the object. NULL if the additional data object is not needed.
\param Cost the function cost in statistics. Pass 0 if the calculation is
not needed.</p>
<p>\returns pointer to context, NULL if failed.</p>
</div></details></section></div></main></body></html>